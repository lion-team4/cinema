<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë¹Œë§í‚¤ ë°œê¸‰ ë° êµ¬ë… ì„±ê³µ</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; max-width: 800px; margin: 0 auto; }
        h1 { color: #2c3e50; }
        h3 { color: #34495e; border-bottom: 2px solid #ecf0f1; padding-bottom: 10px; margin-top: 30px; }
        ul { list-style: none; padding: 0; }
        li { margin-bottom: 10px; padding: 10px; background: #f8f9fa; border-radius: 4px; }
        strong { display: inline-block; width: 140px; color: #7f8c8d; }
        .btn-group { margin-top: 30px; }
        .btn { display: inline-block; padding: 10px 20px; color: white; text-decoration: none; border-radius: 5px; border: none; cursor: pointer; font-size: 14px; margin-right: 10px; }
        .btn-primary { background-color: #3498db; }
        .btn-success { background-color: #2ecc71; }
        .btn-danger { background-color: #e74c3c; }
        .status-badge { padding: 4px 8px; border-radius: 4px; font-size: 0.9em; font-weight: bold; }
        .status-APPROVED { background-color: #d4edda; color: #155724; }
        .status-ACTIVE { background-color: #cce5ff; color: #004085; }
    </style>
</head>
<body>
    <h1>ğŸ‰ êµ¬ë… ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h1>

    <!-- 1. ì´ˆê¸° ê²°ì œ ê²°ê³¼ -->
    <div>
        <h3>ğŸ’³ ì´ˆê¸° ê²°ì œ ê²°ê³¼</h3>
        <ul>
            <li><strong>ìƒí’ˆëª…:</strong> <span th:text="${payment.planName}"></span></li>
            <li><strong>ê²°ì œ ê¸ˆì•¡:</strong> <span th:text="${#numbers.formatInteger(payment.amount, 0, 'COMMA')}"></span>ì›</li>
            <li><strong>ê²°ì œ ìƒíƒœ:</strong>
                <span th:text="${payment.status}" class="status-badge" th:classappend="${'status-' + payment.status}"></span>
            </li>
            <li><strong>ê²°ì œ ì¼ì‹œ:</strong> <span th:text="${#temporals.format(payment.paidAt, 'yyyy-MM-dd HH:mm:ss')}"></span></li>
        </ul>
    </div>

    <!-- 2. êµ¬ë… ì •ë³´ -->
    <div>
        <h3>ğŸ“… êµ¬ë… ìƒì„¸ ì •ë³´</h3>
        <ul>
            <li><strong>êµ¬ë…ì:</strong> <span th:text="${subscriptionResponse.subscriberNickname}"></span></li>
            <li><strong>êµ¬ë… ìƒí’ˆ:</strong> <span th:text="${subscriptionResponse.planName}"></span></li>
            <li><strong>êµ¬ë… ìƒíƒœ:</strong>
                <span th:text="${subscriptionResponse.status}" class="status-badge" th:classappend="${'status-' + subscriptionResponse.status}"></span>
            </li>
            <li><strong>ë‹¤ìŒ ê²°ì œì¼:</strong> <span th:text="${#temporals.format(subscriptionResponse.nextPaymentDate, 'yyyy-MM-dd HH:mm')}"></span></li>
        </ul>
    </div>

    <!-- 3. ê²°ì œ ìˆ˜ë‹¨ ì •ë³´ -->
    <div>
        <h3>ğŸ’³ ë“±ë¡ëœ ê²°ì œ ìˆ˜ë‹¨</h3>
        <ul>
            <li><strong>ì¹´ë“œì‚¬:</strong> <span th:text="${billingResponse.cardCompany}"></span></li>
            <li><strong>ì¹´ë“œ ë²ˆí˜¸:</strong> <span th:text="${billingResponse.cardNumber}"></span></li>
            <li><strong>ì¹´ë“œ íƒ€ì…:</strong> <span th:text="${billingResponse.cardType}"></span></li>
            <li><strong>Billing Key:</strong> <span th:text="${billingResponse.billingKey}"></span></li>
            <li><strong>Customer Key:</strong> <span th:text="${billingResponse.customerKey}"></span></li>
            <li><strong>Card Info:</strong> <span th:text="${billingResponse.card.number}"></span> (<span th:text="${billingResponse.card.cardType}"></span>)</li>
        </ul>
    </div>

    <hr/>

    <div class="btn-group">
        <a th:href="@{/test/pay(nickname=${nickname})}" class="btn btn-primary">ë‹¨ê±´ ê²°ì œ í…ŒìŠ¤íŠ¸</a>
        <a th:href="@{/test/history(nickname=${nickname})}" class="btn btn-success">ê²°ì œ ë‚´ì—­ ë³´ê¸°</a>

        <form th:action="@{/test/billing/delete}" method="post" style="display: inline;">
            <input type="hidden" name="nickname" th:value="${nickname}"/>
            <button type="submit" class="btn btn-danger" onclick="return confirm('ì •ë§ êµ¬ë…ì„ í•´ì§€í•˜ê³  ë¹Œë§í‚¤ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">êµ¬ë… í•´ì§€</button>
        </form>
    </div>
</body>
</html>
